{% extends "base.html" %}

{% block title %}SocialDistribution{% endblock %}

{% block content %}
<nav class="navbar navbar-expand-lg navbar-light bg-light">
	<div class="container-fluid">
		<a class="navbar-brand" href="{%url 'app:index'%}">SocialDistribution</a>
		<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
			aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarNav">
			<ul class="navbar-nav">
				<li class="nav-item">
					<a class="nav-link active" aria-current="page" href="{%url 'app:index'%}">Home</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" aria-current="page" href="{%url 'app:inbox' user.id%}?page=1&size=5">Inbox</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="{% url 'app:post-list' %}">Public posts</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="{% url 'app:create-post' %}">Create a Post</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="{% url 'app:view-profile' %}">Profile</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="{% url 'app:logout' %}">Logout</a>
				</li>
			</ul>
		</div>
	</div>
</nav>

<section>
    <h1>Posts</h1>
    <ul>
        {% for post in stream_posts %}
			{% if post.shared_post %}
				{{ post.author }} shared a post on {{ post.published }}

				<p> {{ post.text_content }} </p>
			
				<a href="{% url 'app:posts' post.shared_post.id %}" style = "color: inherit; text-decoration: inherit;">
					<div >
						Originally posted by {{ post.shared_post.author }}:
						<div style = "border-width:1px; border-style:solid; border-color:grey; margin-left:2%; margin-right: 5%;">
							<div><a href="{% url 'app:posts' post.shared_post.id %}">{{ post.shared_post.title }}</a>
								<br>
									<small>
									posted by {{ post.shared_post.author }} on {{ post.shared_post.published }}
									</small> 
								{% if post.shared_post.text_content %}
									<p> {{ post.shared_post.text_content | urlize }} </p>
								{% endif %}
							
								{% if post.shared_post.image_content %}
									<img alt="User uploaded image" src={{ post.shared_post.image_content.url }}></img>
								{% endif %}

								{% if post.shared_post.image_link %}
									<a href={{ post.shared_post.image_link }}><img src={{ post.shared_post.image_link }} alt="User image link" ></a>
								{% endif %}
								<br/>
							</div>
						</div>
					</div>
			{% else %}
				<div><a href="{% url 'app:posts' post.id %}">{{ post.title }}</a>
					<br>
						<small>
						posted by {{ post.author }} on {{ post.published }}
						</small> 
					{% if post.text_content %}
						<p> {{ post.text_content | urlize }} </p>
					{% endif %}
				
					{% if post.image_content %}
						<img alt="User uploaded image" src={{ post.image_content.url }}></img>
					{% endif %}

					
					{% if post.image_link %}
						<a href={{ post.image_link }}><img src={{ post.image_link }} alt="User image link" ></a>
					{% endif %}
					<br/>
				</div>
			{% endif %}
            <br><br/>
        {% endfor %}
    </ul>
</section>
{% endblock %}
